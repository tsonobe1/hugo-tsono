+++
title = "djangoでsessionを削除する"
author = ["tsonobe"]
date = 2025-03-11T17:12:00+09:00
tags = ["knowledge"]
draft = false
+++

1.  session.flush()
    -   セッションを全削除する
        ```python
        from django.contrib.auth import logout

           def user_logout(request):
               logout(request)
               request.session.flush()
               return redirect('login_page')
        ```

2.  session.pop(key, default=None)

    -   セッションの特定のキーを削除しながら、そのキーの値を返す

    <!--listend-->

    ```python
    def remove_item(request, item_id):
        cart = request.session.get('cart', {}) # キーがなければ{}を返す
        removed_item = cart.pop(item_id, None)
        request.session['cart'] = cart
        return JsonResponse({'removed_item': removed_item})
    ```

3.  del request.session[key]
    -   セッションの特定のキーを削除する
    -   エラー処理が必要
        ```python
        def clear_session_data(request, key):
            try:
                del request.session[key]
            except KeyError:
                pass
        ```
