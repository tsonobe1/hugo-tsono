{{ define "main" }}
  <article>
    <h1>{{ .Title }}</h1>
    {{ with .Params.hugo_tags }}
      <div class="tags-params-display">
        {{ range (split . " ") }}
          <span>{{ . }}</span>
        {{ end }}
      </div>
    {{ end }}
    {{ partial "terms.html" (dict "taxonomy" "categories" "page" .) }}
    {{ partial "terms.html" (dict "taxonomy" "tags" "page" .) }}
    {{ .Content }}
  </article>

  <!-- DEBUG: Attempting to call share-buttons.html in single.html -->
  {{ partial "share-buttons.html" . }}

  <section class="post-list">
    <h3>最新の記事</h3>
    {{ $recent_posts := where .Site.RegularPages "Section" "in" .Site.Params.mainSections | first 5 }}
    {{ range $recent_posts }}
      <article class="post-item">
        <h2><a href="{{ .RelPermalink }}">{{ .LinkTitle }}</a></h2>
        <p>{{ .Summary }}</p>
      </article>
    {{ end }}
  </section>

  <!-- Giscus コメント欄 -->
  {{ if and .Site.Params.comments.enabled (eq .Site.Params.comments.provider "giscus") }}
    <section class="comments">
      <h3>コメント</h3>
      {{ partial "giscus.html" . }}
    </section>
  {{ end }}
{{ end }}
